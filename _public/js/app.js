var angular_app;angular_app=angular.module("HappySad",[]),angular_app.run(["$rootScope",function(e){}]),angular_app.config(["$routeProvider",function(e){return e.when("/",{templateUrl:"partials/main.html",controller:"MainController"}).otherwise({redirectTo:"/"})}]);var MainController;MainController=["$scope",function(e){var t,n,r,i,s,o,u;e.developers=[],i=1;for(s=u=1;u<=1;s=++u)o={name:"Developer "+i++,mood:Math.random()-1.5},e.developers.push(o);return e.msg="Hello World",t=function(t,i,s){var u,a,f,l,c,h;c=e.developers,h=[];for(a=f=0,l=c.length;f<l;a=++f)o=c[a],Math.random()<=t?(u=Math.random()*(s-i)+i,o.mood=o.mood+u,o.mood<-3&&(n(a),o.mood<-4&&(o.mood=-4)),o.mood>2?(o.mood=2,Math.random()>.95?h.push(r()):h.push(void 0)):h.push(void 0)):h.push(void 0);return h},n=function(t){var n,r,i;return t!=null?i=t:(r=e.developers.length,r===1?i=0:i=Math.ceil(r*Math.random())),n=e.developers,e.developers=n.slice(0,i).concat(n.slice(i+1,n.length))},r=function(){return o={name:"Developer "+i++,mood:-1},e.developers.push(o)},e.freeFood=function(){return t(.3,-0.1,.3)},e.workOnIE6=function(){return t(.8,-2,.2)},e.workHarder=function(){return t(.5,-0.25,0)},e.integration=function(){return t(.7,.3,1)},e.beer=function(){return t(.3,.8,3)},e.fire=function(e){var t,r;r=[];for(s=t=1;1<=e?t<=e:t>=e;s=1<=e?++t:--t)r.push(n());return r},e.makeExample=function(){return n(),t(.8,-2,2)},e.energydrink=function(){return t(.3,.3,2)},e.overhours=function(){return t(.4,-0.3,-0.1)},e.fearmanagement=function(){return t(.5,-0.2,-0.1)},e.hire=function(e){var t,n;n=[];for(s=t=1;1<=e?t<=e:t>=e;s=1<=e?++t:--t)n.push(r());return n},e.sort=function(){return e.developers=e.developers.sort(function(e,t){return e.mood>t.mood?-1:1})},e.shake=function(){return d3.shuffle(e.developers)}}],angular_app.directive("happySad",function(){return{restrict:"E",replace:!1,scope:{developers:"=developers"},link:function(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g;return g=520,u=620,m=d3.select(t[0]).append("svg").attr("width",g).attr("height",u),i=m.append("g").classed("chart",!0),i.append("path").attr("id","chart_line"),i.append("line").classed("yaxis",!0).attr("x1",15).attr("y1",10).attr("x2",15).attr("y2",100).attr("stroke","black"),i.append("line").classed("yaxis",!0).attr("x1",15).attr("y1",100).attr("x2",g-10).attr("y2",100).attr("stroke","black"),i.append("text").text("Count").attr("x",10).attr("y",75).attr("transform","rotate(270,10,75)").attr("fill","black"),l=d3.scale.linear().domain([-4,2]).range([0,1]),e.$watch("developers",function(e,t){if(e===t)return;return s()},!0),h="    M0,100    C0,100,100,100,100,100    C95,180,5,180,0,100    z    ",p="    M0,100    C0,100,100,100,100,100    C100,100,0,100,0,100    z    ",d="    M0,100    C5,50,95,50,100,100    C95,50,5,50,0,100    ",v=function(e){return d3.rgb(c(e.mood)).darker(2)},a=function(e){return e.append("circle").classed("shape",!0).attr("fill",function(e){return c(e.mood)}).attr("stroke",v).attr("stroke-width",5).attr("cx",0).attr("cy",0).attr("r",50),e.append("circle").classed("l_eye",!0).attr("stroke",v).attr("stroke-width",2).attr("fill",v).attr("cx",-20).attr("cy",-20).attr("r",10),e.append("circle").classed("r_eye",!0).attr("stroke-width",2).attr("fill",v).attr("stroke",v).attr("cx",20).attr("cy",-20).attr("r",10),e.append("path").classed("mouth",!0).attr("stroke",v).attr("fill",v).attr("stroke-width",3).attr("transform","translate(-25,-40), scale(0.5, 0.5)").attr("d",function(e,t){return f(e.mood)})},f=function(e){var t,n;return e=l(e),n=d3.interpolate(d,p),t=d3.interpolate(p,h),e===.5?p:e<.5?n(e*2):t((e-.5)*2)},c=function(e){var t,n;return e=l(e),n=d3.interpolateRgb("#C73C2D","#FFFFFF"),t=d3.interpolateRgb("#FFFFFF","#83A443"),e===.5?n(1):e<.5?n(e*2):t((e-.5)*2)},o=function(){var t,n,r,s,o,u,a,f;return a=d3.scale.quantize().range([0,1,2,3,4,5,6,7,8,9,10]).domain([-4,2]),f=d3.nest().key(function(e){return a(e.mood)}).rollup(function(e){return e.length||0}).map(e.developers),t=d3.scale.linear().range([25,g-25]).domain([0,10]),u=d3.max(d3.map(f).entries(),function(e){return e.value}),n=d3.scale.linear().range([90,30]).domain([0,u]),o=d3.svg.line().x(function(e){return t(e)}).y(function(e){var t;return n((t=f[e])!=null?t:0)}).interpolate("cardinal"),s=i.selectAll("circle").data([0,1,2,3,4,5,6,7,8,9,10]),i.select("#chart_line").transition().duration(500).attr("d",o([0,1,2,3,4,5,6,7,8,9,10])).attr("fill","none").attr("stroke","#82A5B8").attr("stroke-width",2).attr("shape-rendering","geometricPrecision"),r=d3.scale.linear().range([-4,2]).domain([0,10]),s.enter().append("circle").attr("cx",function(e){return t(e)}).attr("cy",function(e){var t;return n((t=f[e])!=null?t:0)}).attr("r",5).attr("stroke",function(e){var t;return t=c(r(e)),d3.rgb(t).darker(2)}).attr("stroke-width",2).attr("fill",function(e){var t;return t=c(r(e))}),s.transition().duration(500).attr("cx",function(e){return t(e)}).attr("cy",function(e){var t;return n((t=f[e])!=null?t:0)}).attr("stroke",function(e){var t;return t=c(r(e)),d3.rgb(t).darker(2)}).attr("fill",function(e){var t;return t=c(r(e))}),s.exit().remove()},s=function(){var t,n;return o(),t=m.selectAll("g.people g.face").data(e.developers,function(e,t){return e.name}),t.exit().transition().duration(500).attr("opacity",0).transition().remove(),n=function(t){var n,r,i,s,o,u,a,f,l,c;l=["shape","l_eye","r_eye","mouth"];for(o=0,a=l.length;o<a;o++)r=l[o],t.select("."+r).attr("stroke",v);c=["l_eye","r_eye","mouth"];for(u=0,f=c.length;u<f;u++)r=c[u],t.select("."+r).attr("fill",v);return i=e.developers.length,s=Math.ceil(Math.sqrt(i)),n=4/s,s<4&&(n=3/s),t.attr("transform",function(e,t){var r,i,o;return r=1.2,Math.floor(t/s)%2?i=100+(s-1-t%s)*100*r:i=100+t%s*100*r,o=100+Math.floor(t/s)*100*r,"scale("+n+","+n+"),translate("+i+","+o+")"})},t.transition().duration(0).attr("opacity",1).transition().duration(500).delay(500).call(n),t.enter().append("g").classed("people",!0).attr("transform","translate(0,100)").append("g").classed("face",!0).call(a).call(n).attr("opacity",0).transition().duration(1500).attr("opacity",1),t.select(".mouth").transition().duration(1300).attr("d",function(e,t){return f(e.mood)}).attr("fill",v).attr("stroke",v),t.select(".shape").transition().duration(1300).attr("fill",function(e,t){return c(e.mood)}).attr("stroke",v)},s()}}})